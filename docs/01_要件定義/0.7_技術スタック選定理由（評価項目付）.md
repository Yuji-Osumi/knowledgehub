# 0.7 技術スタック選定理由（評価項目付き）

---

## 1. バックエンド

### 技術選定：Python + FastAPI
- **採用理由**
  - Pythonはシンプルで読みやすく、生産性が高い
  - FastAPIは型ヒントが豊富でバグを減らせる
  - 自動APIドキュメント（Swagger UI）が生成され、ポートフォリオに見せやすい
  - 非同期処理にも対応可能で将来的な拡張性が高い
  - ORM・検索・認証周りまでまとまっている
  - 調査・コードサンプルが豊富でハマりにくい
- **評価項目**
  - 可読性 / 保守性
  - テスト容易性
  - API仕様自動生成の有無
  - 非同期処理対応の有無
→言語はパイソンの設計思想が好きなのでパイソンを選定

---

## 2. データベース

### 技術選定：PostgreSQL + SQLAlchemy + Alembic
- **採用理由**
  - リレーショナルDBとして安定性・信頼性が高い
  - SQLAlchemyでORM操作が簡単かつ柔軟
  - Alembicでマイグレーション管理可能
  - tsvector + GINインデックスによる全文検索で追加ミドルウェア不要
- **評価項目**
  - データ整合性
  - 検索性能
  - マイグレーション管理の簡便さ
  - 拡張性（将来的なキャッシュ / 多言語対応）

---

## 3. フロントエンド
### 技術選定：Vite + React + TailwindCSS + Tiptap Editor

**採用理由**
1. **Vite + React**
   - 軽量かつ高速な開発環境を提供
   - コンポーネント指向の開発が容易で保守性が高い
   - 将来的な拡張やモダンWebアプリ開発に適応可能
→Next.jsも検討したが工数の懸念から断念
→本プロジェクトではプロジェクトの完遂と要件定義、インフラリリースが肝（未経験タスクのため）

2. **TailwindCSS**
   - ユーティリティクラスによる効率的なスタイル管理
   - レスポンシブ対応も容易でデザインを素早く調整可能
   - CSS設計の学習コストが低く、個人開発に向く

3. **Tiptap Editor**
   - Markdown編集・プレビュー機能を一括管理可能
   - テーブル、チェックリスト、リンクなど拡張機能対応
   - WYSIWYGで記事作成の操作性が高く、MVP開発の効率を向上
   - 将来的に関連ノートの自動整理やAI補助機能とも組み合わせやすい
→react-markdownを検討したがは表示専用なら軽量だが、編集＋プレビューの統合には追加工数が必要のため見送り
→専用に必要に応じてreact-markdownを併用する構成を検討

<!-- ### 技術選定：Next.js + TailwindCSS + Tiptap Editor　（当初案）工数大のため見送り
- **採用理由**
  - Next.jsはSSR/SPA両対応で、モダンなWebアプリ開発に最適
  - TailwindCSSでスタイルを効率的に管理可能
  - TiptapでMarkdown編集・プレビューUIを簡単に構築可能
- **評価項目**
  - 開発スピード / 保守性
  - UIの柔軟性
  - Markdown対応の容易さ
  - レスポンシブ対応の容易さ -->

---


# 0.4 認証・セキュリティ技術選定理由（評価項目付き）

## 技術選定：Cookieセッション認証

- **採用理由**
  - FastAPIで簡単に実装できるため、MVP開発の工数が最小
  - ブラウザが自動でCookieを送信するため、フロント側の設定が少なく済む
  - 小規模プロジェクトや個人開発に最適
  - セッション管理ライブラリを利用すれば、ログイン・ログアウト処理も簡単
  - 必要に応じてCSRF対策を組み込むことでセキュリティも確保可能
→FastAPIとの相性の良さからこちらを採用

- **評価項目**
  - 実装容易性（ログイン・ログアウト）
  - フロント工数（設定・管理の簡便さ）
  - セキュリティ（CSRF対策、セッション管理）
  - MVP工数（低）
  - 将来的な拡張性（JWTやOAuth2への移行容易性）

<!-- ## 技術選定：JWT認証 + bcrypt　（当初案）工数増のため見送り

- **採用理由**
  - クライアント側でトークン保持のためサーバー負荷が少ない
  - フロント・バック分離アプリケーションに適している
  - Swagger UIで簡単にAPIテスト可能
  - パスワードはbcryptで安全にハッシュ化
  - 将来的なOAuth2連携も容易
- **評価項目**
  - 実装容易性（ログイン・ログアウト）
  - セキュリティ（トークン・パスワード保護）
  - 拡張性（外部ログイン対応）
  - MVP工数（低） -->



---

## 5. 検索機能

### 技術選定：PostgreSQL全文検索（tsvector + GIN）
- **採用理由**
  - 追加ミドルウェア不要で管理が簡単
  - タイトル・本文の検索やタグ絞り込みが容易
  - 重み付け検索で関連度順表示が可能
- **評価項目**
  - 検索速度
  - フィルタリング対応
  - 拡張性（AI補助検索対応など）

---

## 6. ログ・監査

### 技術選定：FastAPIミドルウェア + DB格納
- **採用理由**
  - API単位で操作ログを簡単に収集可能
  - 記事編集履歴やアクセスログの監査に利用可能
- **評価項目**
  - ログ収集の網羅性
  - 拡張性（ダッシュボードや監査用UIへの展開）
  - パフォーマンス影響の少なさ

---

## 7. デプロイ・インフラ整備

## 技術選定：Docker（学習用） + Railway（本番デプロイ）
 **採用理由**
  - Docker を触ることで環境構築・コンテナ化の学習が可能
  - 開発環境は Docker で統一 → ローカル検証が容易
  - 本番は Railway にデプロイ → 工数と運用負荷を最小化
  - DBも Railway PostgreSQL を利用可能 → マイグレーションや接続設定が簡単
  - Nginx 設定は不要 → SSL やリバースプロキシは Railway が管理
  - 将来的に Docker 本番運用に移行することも可能

 **評価項目**
  - 学習・経験価値（高）
  - 開発環境再現性（高）
  - デプロイ工数（低：本番は Railway）
  - セキュリティ（SSL 自動提供）
  - 拡張性（Docker 本番化も容易）

<!-- ### 技術選定：Docker / docker-compose + Nginx　（当初案）工数増のため見送り
- **採用理由**
  - 開発環境と本番環境の差異を減らし、簡単に環境再現可能
  - NginxでSSL対応や負荷分散、リバースプロキシを管理可能
- **評価項目**
  - 環境構築の容易さ
  - 移植性・可搬性
  - CI/CDとの親和性
  - 運用コストの最小化 -->

---

## 8. テスト・品質保証

### 8.1 バックエンドテスト：pytest + FastAPI
- **採用理由**
  - Unitテスト・APIテスト簡単に記述可能
  - 型ヒントと組み合わせてバグを減らせる
- **評価項目**
  - テストカバレッジ
  - 実装容易性
  - 回帰テスト対応の容易さ

### 8.2 フロントテスト：Playwright（最低限 E2E 1本）
- **採用理由**
  - 実ブラウザに近い挙動で主要画面操作を確認できる
  - Cookieベース認証との相性が良く、ログイン状態を自然に扱える
  - コンポーネント単体テストは行わず、工数を最小化
- **評価項目**
  - 自動化のしやすさ
  - 主要ユーザーフローの確認容易性
  - MVPに必要な最低限の動作保証
  - 今後の主要技術
→Cypressを検討するもやや頭打ちの技術か

### 8.3 DevOps観点で補う最低限のポイント
1. **CI/CDによる自動チェック**
   - Push / PR時にGitHub Actionsで自動実行
   - バックエンド：pytest E2E 1〜3本
   - フロント：Cypress 1本
2. **ロギング・監査整備**
   - API呼び出しログをDBに記録
   - 主要イベント（作成・更新・削除）をログに残す
3. **デプロイ前チェックリスト**
   - DBマイグレーション最新確認
   - 主要APIの動作確認（簡易E2E）
   - フロント表示・主要操作確認
   - 手動チェックでもMVPなら十分

---

## 9. まとめ

KnowledgeHub 技術選定基準：
- シンプルさ・保守性（Python / FastAPI / React）
- フルスタック開発の効率（ORM + Alembic / TailwindCSS）
- MVP実装の迅速さ
- 将来的な拡張性（全文検索 / AI補助 / バージョン管理）
- デプロイ・インフラの再現性と運用容易性
- 最小限テスト + DevOps補足で品質保証
