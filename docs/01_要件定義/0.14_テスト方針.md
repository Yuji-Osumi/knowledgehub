# 0.14 テスト方針

## 1. テスト方針の基本

- 個人開発・MVP前提で **最低限だが意味のあるテスト** に絞る
- 網羅性よりも「主要機能が壊れていないこと」の確認を重視
- テストは品質保証より **安心して変更できる状態を作るための補助** と位置付ける
- 実装コスト・保守コストが高いテストは行わない

---

## 2. テスト対象の優先順位

優先度は以下の順とする。

1. 認証（ログイン / 未ログイン制御）
2. 記事CRUD（作成・取得・更新・削除）
3. 検索機能（最低限の動作確認）
4. タグ・フォルダ管理（簡易確認）

---

## 3. バックエンドテスト

### 使用ツール

- pytest
- FastAPI TestClient

### テスト種別

#### APIレベルテスト（E2E寄り）

- 実際のAPIエンドポイントを呼び出す形式
- DB接続を含めた動作確認を行う
- モックは最小限とする

### テスト範囲（最小構成）

- ログイン成功 / 失敗
- 未ログイン時のアクセス拒否
- 記事の作成 → 取得 → 更新 → 削除
- 検索APIが結果を返すこと

※ 単体テスト（関数単位）は原則作成しない

---

## 4. フロントエンドテスト

### 使用ツール

- Playwright

### テスト方針

- E2Eテストのみ実施
- 画面操作ベースで主要フローを1〜2本確認する

### 最低限のテストケース

- ログイン → 記事一覧表示
- 記事作成 → 保存 → 再表示

※ コンポーネント単体テスト（Jest / RTL）は導入しない

---

## 5. テスト環境

- テスト用DBはローカル環境でのみ使用
- CIでは最低限のテストのみ実行する
- 本番環境での自動テストは行わない

---

## 6. CIにおけるテスト実行

### 方針

- PR / main ブランチへの push 時にテスト実行
- 失敗時はデプロイしない

### 実行内容（最小）

- バックエンド：pytest（主要テストのみ）
- フロントエンド：Playwright（1本）

---

## 7. あえてやらないこと（割り切り）

- テストカバレッジ計測
- パフォーマンステスト
- 負荷テスト
- セキュリティテスト（自動）
- ブラウザ互換性テスト

理由：
MVP・個人開発規模では **費用対効果が低いため**

---

## 8. テスト方針まとめ

- 「最低限・壊れない・安心できる」をゴールとする
- E2E寄りのテストに集中する
- テストは守るためではなく、進めるために書く
