## 2. 共通仕様

### 2.1 レスポンス形式

#### 正常レスポンス
- すべてのAPIで JSON を返却
- 基本形:

```json
{
  "status": "success",
  "data": { ... }
}
```

#### エラーレスポンス
- すべてのAPIで統一:

```json
{
  "status": "error",
  "code": 401,
  "message": "Unauthorized"
}
```

- `code` は HTTP ステータスに対応
- `message` は人間が読める形で記述

---

### 2.2 日付・時刻の扱い
- タイムゾーンは UTC
- ISO 8601 形式で統一

```json
"created_at": "2025-12-14T14:00:00Z"
```

---

### 2.3 IDの扱い
- 外部向け ID は `public_id` (UUID)
- 内部IDは公開しない
- Path Parameter や Response で UUID を使用

---

### 2.4 ページング / ソート
- 一覧取得APIはページング必須
- Query Parameter:
  - `page`: 1以上の整数（デフォルト 1）
  - `per_page`: 取得件数（デフォルト 20）
- ソートは `updated_at` 昇順 / 降順のみ対応
- Response例:

```json
{
  "status": "success",
  "data": [ ... ],
  "pagination": {
    "page": 1,
    "per_page": 20,
    "total": 35
  }
}
```

---

### 2.5 認証・認可
- すべてのAPIで Cookie ベース認証
- 認証必須か不要かは個別APIで明記
- 未認証アクセスは 401 を返す

---

### 2.6 検索・全文検索
- 検索APIは `/search` に集約
- 検索対象: `articles.title` + `articles.content` (`search_vector`)
- Like検索や全文検索の実装はバックエンド側で吸収
- Responseは記事一覧形式で返却

---

### 2.7 共通制約・ルール
- 入力値は基本バリデーション必須
  - 文字列長、必須項目、UUID形式など
- 例外時はエラー形式で統一
- API仕様書上の Field 名は **スネークケース** で統一
"""
