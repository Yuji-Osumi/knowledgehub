# ログ設計（MVP）

## 目的

本ドキュメントは、KnowledgeHub における **ログ出力の最低限の方針**を定める。

MVP 前提のため、
運用・調査に必要な最小限のログのみを扱う。

---

## 基本方針

* ログは「調査できる」ことを目的とする
* 出しすぎない・足りなさすぎない
* フレームワーク標準に乗る

---

## 対象とするログ

### エラーログ（必須）

* 想定外例外
* API 処理中の例外

👉 **必ず出力する**

---

### 操作ログ（MVPでは最小）

* MVP 段階では詳細な操作ログは取らない
* 必要になった場合に追加する

---

## 出力先

* 標準出力（stdout）
* Railway のログ機能で確認する

---

## ログ内容

### 含める情報

* ログレベル（ERROR / WARNING / INFO）
* エラーメッセージ
* 発生箇所（可能な範囲）

---

### 含めない情報

* パスワード
* セッション ID
* トークン
* 個人情報

---

## ログレベル方針

* ERROR：例外・処理失敗
* WARNING：想定外だが継続可能
* INFO：起動・重要イベントのみ

---

## 実装方針（Backend）

* Python 標準の logging を使用する
* print によるログ出力は禁止

```python
import logging

logger = logging.getLogger(__name__)

logger.error("Unexpected error", exc_info=True)
```

---

## ログと例外の関係

* 例外はログに出した上で再送出する
* ログ出力のみで処理を終えない

---

## 将来拡張（今回はやらない）

* request_id 付与
* ユーザー操作ログ
* 外部ログ基盤連携

---

## 判断に迷った場合

* 後で原因調査できるか
* 情報を出しすぎていないか
* MVP として過剰でないか

---

このログ設計は、
**個人開発における最低限の運用耐性**を確保するものである。
